{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/logo.jpg","path":"images/logo.jpg","modified":1,"renderable":0},{"_id":"themes/solar-theme-hexo/source/css/style.styl","path":"css/style.styl","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/apple-touch-icon.png","path":"images/apple-touch-icon.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/favicon-192x192.png","path":"images/favicon-192x192.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/earth.png","path":"images/earth.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/logo.png","path":"images/logo.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/favicon.ico","path":"images/favicon.ico","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/mars.png","path":"images/mars.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/mercury.png","path":"images/mercury.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/shadow.png","path":"images/shadow.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/venus.png","path":"images/venus.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/jupiter.png","path":"images/jupiter.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/sun.png","path":"images/sun.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/justified-gallery/jquery.justifiedGallery.min.js","path":"lib/justified-gallery/jquery.justifiedGallery.min.js","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/justified-gallery/justifiedGallery.min.css","path":"lib/justified-gallery/justifiedGallery.min.css","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/styles.css","path":"lib/meslo-LG/styles.css","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/images/Solar.png","path":"images/Solar.png","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/jquery/jquery.min.js","path":"lib/jquery/jquery.min.js","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGL-Italic.ttf","path":"lib/meslo-LG/fonts/MesloLGL-Italic.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGM-Italic.ttf","path":"lib/meslo-LG/fonts/MesloLGM-Italic.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGS-Italic.ttf","path":"lib/meslo-LG/fonts/MesloLGS-Italic.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGL-BoldItalic.ttf","path":"lib/meslo-LG/fonts/MesloLGL-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGL-Bold.ttf","path":"lib/meslo-LG/fonts/MesloLGL-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGL-Regular.ttf","path":"lib/meslo-LG/fonts/MesloLGL-Regular.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGM-Bold.ttf","path":"lib/meslo-LG/fonts/MesloLGM-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGM-BoldItalic.ttf","path":"lib/meslo-LG/fonts/MesloLGM-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGM-Regular.ttf","path":"lib/meslo-LG/fonts/MesloLGM-Regular.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGS-Bold.ttf","path":"lib/meslo-LG/fonts/MesloLGS-Bold.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGS-BoldItalic.ttf","path":"lib/meslo-LG/fonts/MesloLGS-BoldItalic.ttf","modified":1,"renderable":1},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGS-Regular.ttf","path":"lib/meslo-LG/fonts/MesloLGS-Regular.ttf","modified":1,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"495dc0d217dbc3e7cb0c015a4aa9af3e7011d37f","modified":1494149618000},{"_id":"themes/solar-theme-hexo/LICENSE","hash":"5ba0225e835bf8218d1524f481efc50c85447745","modified":1494170667000},{"_id":"themes/solar-theme-hexo/README.md","hash":"2ff73c09ebd6629da69d289f29849ab3047d948b","modified":1494170667000},{"_id":"themes/solar-theme-hexo/_config.yml","hash":"70c9752f7f158d8b85c67becbb47e783d9ade7de","modified":1494172021000},{"_id":"source/_posts/hello-world.md","hash":"8a02477044e2b77f1b262da2c48c01429e4a32e4","modified":1494080486000},{"_id":"source/_posts/å…³äºXMLHttpRequest.md","hash":"c89d8455efadf9b8346d670aa7854f295244b7df","modified":1494171286000},{"_id":"source/images/logo.jpg","hash":"63cfaf908e5a4a512a47ff6c7067c5db9f9c37dc","modified":1494170737000},{"_id":"themes/solar-theme-hexo/layout/archive.ejs","hash":"f9c0434f023bdf2858aa8447137463c3224814be","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/index.ejs","hash":"0ea23cf9f01820a7e1c86600110afa876041cd25","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout.ejs","hash":"52b18d33641395aa85c1f099380ffe79eb8dd3e1","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/page.ejs","hash":"b6b7b1e6dc856a0e62f35da0151f67ba41143e04","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/post.ejs","hash":"2731e597b5d1714a6f5a775c432e99785f02a3e3","modified":1494170667000},{"_id":"themes/solar-theme-hexo/scripts/meta.js","hash":"fa6055a39851c9953d033e70c1614547b94dce60","modified":1494170667000},{"_id":"themes/solar-theme-hexo/scripts/thumbnail.js","hash":"df8829fd8c3119650037eba5ec11bdce06acff9d","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/banner.ejs","hash":"2611a9acb5392f425531610f5a12d396270041f7","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/comments.ejs","hash":"853a4500da515ef3facc51a055886eaf8efd080d","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/footer.ejs","hash":"7f6b3f126a58e6734b658ab57bc6b41822bc9342","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/head.ejs","hash":"5b6f73a4fb96edde3005f90063509bf851714f72","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/header.ejs","hash":"889fe54bbfd1fb3357e8c0614d57a437a72f782a","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/scripts.ejs","hash":"264e49c76744a2ce5be4cd69910cab8e0f517eda","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/archive.ejs","hash":"f9c0434f023bdf2858aa8447137463c3224814be","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/index.ejs","hash":"0ea23cf9f01820a7e1c86600110afa876041cd25","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/layout.ejs","hash":"52b18d33641395aa85c1f099380ffe79eb8dd3e1","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/page.ejs","hash":"b6b7b1e6dc856a0e62f35da0151f67ba41143e04","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/post.ejs","hash":"2731e597b5d1714a6f5a775c432e99785f02a3e3","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_extend.styl","hash":"2d360cc07d3cfe10fd95640346515f51fa0ea799","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_mixins.styl","hash":"c921ceb620deedddd38c9cec28190995e8764bab","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_util.styl","hash":"f8e286a21c7ec3e771d5ddeb2909ac92390af9bd","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_variables.styl","hash":"05dfdc680b2a156f615433a5978bf80178acb26f","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/style.styl","hash":"2b9c9697d30759cb3c49b52486b6fc34bcfbe464","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/apple-touch-icon.png","hash":"bb91acbedda435287809e41148b1b255cdf957dc","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/favicon-192x192.png","hash":"4b07282018db1888c7bc707a3e1b576c5684eabb","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/earth.png","hash":"2cdcc68e36457410c633a578bb7b30a803193ecb","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/logo.png","hash":"2084e1813f7310d9543a37608f4e6690d600b9c3","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/favicon.ico","hash":"54972e5dafeb73579b30c17232553c688d702448","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/mars.png","hash":"4b33fb4ef0359cb401d4ed6d862caf55fb560802","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/mercury.png","hash":"e5ecda952ae568b8890026c7ab02a175652535a2","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/shadow.png","hash":"ec5cfff7997edd1b5e01516604daca7c7a4f3788","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/venus.png","hash":"d45968836d952cd017439323135e6fad155c45ae","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/js/main.js","hash":"481f730da10e5c9e1d59dfa9f1c0714ae709a0b8","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_partial/archive.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/jupiter.png","hash":"4b7bc03b4cdf2fcde13e982aef340a1d385a3e7d","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/sun.png","hash":"62be3d54471271a1e8adb348a3f021ef001b4668","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/post/actions_desktop.ejs","hash":"b3ab56ec0b9a320cce49b239b2d3e8a86f61cb44","modified":1494172303000},{"_id":"themes/solar-theme-hexo/layout/_partial/post/actions_mobile.ejs","hash":"4541aa92414ae6afe6a02f6a9c392d219cdc29e0","modified":1494172250000},{"_id":"themes/solar-theme-hexo/layout/_partial/post/date.ejs","hash":"12a4a7ba6334e3e5c03d9a9601d7779a27c2e082","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/post/gallery.ejs","hash":"9aecd8908e8a684f33dc20c02497c0f1774137c7","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/post/share.ejs","hash":"25a3406f97e976ec13239f0d3f32f9e512511f50","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/post/tag.ejs","hash":"bfab03ef986d35ccad583f2d2b575db4a8d2789e","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/_partial/post/title.ejs","hash":"a060f1c6e3718494a6b1d0e1981ea0bf4e549828","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/banner.ejs","hash":"f4359350f4b79b14a9d669055911d50d7a3dfd89","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/comments.ejs","hash":"853a4500da515ef3facc51a055886eaf8efd080d","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/footer.ejs","hash":"7f6b3f126a58e6734b658ab57bc6b41822bc9342","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/head.ejs","hash":"5b6f73a4fb96edde3005f90063509bf851714f72","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/header.ejs","hash":"889fe54bbfd1fb3357e8c0614d57a437a72f782a","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/scripts.ejs","hash":"264e49c76744a2ce5be4cd69910cab8e0f517eda","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/agate.styl","hash":"601eb70448a16b918df132f6fc41e891ae053653","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/androidstudio.styl","hash":"65d09f1b0e81c6a182f549fd3de51e59823c97ae","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/arta.styl","hash":"1a5accc115f41d1b669ed708ac6a29abac876599","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/atelier-cave-dark.styl","hash":"bc647b2c1d971d7cc947aa1ed66e9fd115261921","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/atelier-dune-dark.styl","hash":"df50a85a4b14c7ca6e825d665594b91229d0e460","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/atelier-estuary-dark.styl","hash":"d84382bc8298f96730757391d3e761b7e640f406","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/atelier-forest-dark.styl","hash":"57c154c6045a038dc7df0a25927853e10bf48c4a","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/atelier-heath-dark.styl","hash":"b0cf13b2233e7bc38342032d2d7296591a4c2bcf","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/atelier-lakeside-dark.styl","hash":"bb0a8c4ad0dd8e3e7de7122ddf268fc42aa94acb","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/atelier-plateau-dark.styl","hash":"09c64f1a7052aec9070c36c0431df25216afaea1","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/atelier-savanna-dark.styl","hash":"a16c919a1ccf2f845488078fb341381bec46b1f3","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/atelier-seaside-dark.styl","hash":"ce233a101daea7124cbfcd34add43ccfe2e1e1c7","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"414b0cfc142f70afe359c16450b651e28bf7325a","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/codepen-embed.styl","hash":"f4dcc84d8e39f9831a5efe80e51923fc3054feb0","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/dark.styl","hash":"71ce56d311cc2f3a605f6e2c495ccd7236878404","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/darkula.styl","hash":"ad0d5728d21645039c9f199e7a56814170ed3bab","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/far.styl","hash":"d9928010ffe71e80b97a5afcba1a4975efdd7372","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/hopscotch.styl","hash":"b374c6550b89b4751aedc8fbc3cf98d95bd70ead","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/hybrid.styl","hash":"ea8d7ddc258b073308746385f5cb85aabb8bfb83","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/ir-black.styl","hash":"693078bbd72a2091ed30f506cc55949600b717af","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/monokai.styl","hash":"5a4fe9f957fd7a368c21b62a818403db4270452f","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/kimbie.styl","hash":"45dbb168f22d739d0109745d2decd66b5f94e786","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/lightcode.styl","hash":"6c61c481836f6cbc3a57be10fa3af21bee83eb09","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/monokai-sublime.styl","hash":"25aa2fc1dbe38593e7c7ebe525438a39574d9935","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/obsidian.styl","hash":"55572bbcfee1de6c31ac54681bb00336f5ae826d","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/paraiso.styl","hash":"f1537bd868579fa018ecdbfd2eb922dcf3ba2cac","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/pojoaque.styl","hash":"77dae9dc41945359d17fe84dbd317f1b40b2ee33","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/railscasts.styl","hash":"acd620f8bb7ff0e3fe5f9a22b4433ceef93a05e6","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/rainbow.styl","hash":"ce73b858fc0aba0e57ef9fb136c083082746bc1d","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/solarized-dark.styl","hash":"702b9299a48c90124e3ac1d45f1591042f2beccc","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/sunburst.styl","hash":"a0b5b5129547a23865d400cfa562ea0ac1ee3958","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/tomorrow-night-blue.styl","hash":"8b3087d4422be6eb800935a22eb11e035341c4ba","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/tomorrow-night-bright.styl","hash":"0ac6af6ecb446b5b60d6226748e4a6532db34f57","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/tomorrow-night-eighties.styl","hash":"fa57b3bb7857a160fc856dbe319b31e30cc5d771","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/tomorrow-night.styl","hash":"19b3080d4b066b40d50d7e7f297472482b5801fd","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_highlight/zenburn.styl","hash":"fc5ec840435dad80964d04519d3f882ddc03746a","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_partial/article.styl","hash":"7bd68ecc8ebeb70daa74bfc179f984032eef18ae","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_partial/comments.styl","hash":"11fb41241a13971d23fc3f7e6d60315c7f248396","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_partial/footer.styl","hash":"b7570de60eaf9aa6b0192bf9c71b9172ff11bfbc","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_partial/header.styl","hash":"1545e8303fe36bbabb4da4a967c424de07d93dec","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_partial/index.styl","hash":"cf43702450ea1e5617541501886982a394cff8ec","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_partial/solar.styl","hash":"3af61c9b8033a4b804f0e1ba52525b55d6e16126","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/justified-gallery/jquery.justifiedGallery.min.js","hash":"b2683e7a872bc109b1756a65188a37cef7d0bd5c","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/justified-gallery/justifiedGallery.min.css","hash":"13fbcba5e97aa88b748d94d3efc4718475279907","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/styles.css","hash":"eb88d0b9f1bbef99070e9627e2c96d892036bf7e","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/images/Solar.png","hash":"463dbb952527b3d35c6203575eec552f62fd9d8e","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/jquery/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/post/actions_desktop.ejs","hash":"b3ab56ec0b9a320cce49b239b2d3e8a86f61cb44","modified":1494172288000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/post/actions_mobile.ejs","hash":"4541aa92414ae6afe6a02f6a9c392d219cdc29e0","modified":1494172242000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/post/date.ejs","hash":"12a4a7ba6334e3e5c03d9a9601d7779a27c2e082","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/post/gallery.ejs","hash":"9aecd8908e8a684f33dc20c02497c0f1774137c7","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/post/share.ejs","hash":"25a3406f97e976ec13239f0d3f32f9e512511f50","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/post/tag.ejs","hash":"bfab03ef986d35ccad583f2d2b575db4a8d2789e","modified":1494170667000},{"_id":"themes/solar-theme-hexo/layout/layout/_partial/post/title.ejs","hash":"a060f1c6e3718494a6b1d0e1981ea0bf4e549828","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_partial/post/actions_desktop.styl","hash":"906679858f1d5d503a6001d96be830fb7c5b3ffa","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/css/_partial/post/actions_mobile.styl","hash":"9eb19c3063d300c9ca548d671770edc71e357eba","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/css/font-awesome.css","hash":"4eda182cbcc046dbf449aef97c02c230cf80a494","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/css/font-awesome.min.css","hash":"fb5b49426dee7f1508500e698d1b3c6b04c8fcce","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGL-Italic.ttf","hash":"96c97a0a098ca40802f948ae56fa37aa6683d034","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGM-Italic.ttf","hash":"68700db02debd4b922304134da83b829cbfddfc9","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGS-Italic.ttf","hash":"7f7cdbdcc26279c04046632e22d872f111bc9399","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGL-BoldItalic.ttf","hash":"a9a431fc7a6c3a67c98021d4035c12a07a4f1070","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGL-Bold.ttf","hash":"bfa1ed9a263ed78462f06d322de13bd5bd0906b2","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGL-Regular.ttf","hash":"2b912dd13f052f645ee19951604610bb350d50af","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGM-Bold.ttf","hash":"a8a8df3393bccc365335fc5eb0a62a6b7ccd32b9","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGM-BoldItalic.ttf","hash":"65ddb11e75ee93909e845ab912a36717c48f1c94","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGM-Regular.ttf","hash":"5e220152adefe905b2197f873d7cee99eca50e91","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGS-Bold.ttf","hash":"df202ce09cbdc70bc16b81983a13ef0f94e46f10","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGS-BoldItalic.ttf","hash":"d895a1bd25e36c58b7f463ebe14de09f186d5ab4","modified":1494170667000},{"_id":"themes/solar-theme-hexo/source/lib/meslo-LG/fonts/MesloLGS-Regular.ttf","hash":"56fa0e33a390b704afc56af93a31576ccdbbdd9e","modified":1494170667000}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2017-05-06T08:43:45.000Z","updated":"2017-05-06T14:21:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2evu1b50000yptx7aa1ngr1","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"external\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"external\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"external\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"external\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"external\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo server</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"external\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo generate</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"external\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo deploy</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"external\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"external\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"external\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"external\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"external\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"external\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo server</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"external\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo generate</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"external\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ hexo deploy</div></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"external\">Deployment</a></p>\n"},{"title":"å…³äºXMLHttpRequest","date":"2017-05-07T04:37:45.000Z","_content":"## XMLHttpRequestæ˜¯ä»€ä¹ˆ\nXMLHttpRequest æ˜¯ä¸€ä¸ª[API](https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest), å®ƒä¸ºå®¢æˆ·ç«¯æä¾›äº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„åŠŸèƒ½ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé€šè¿‡ URL æ¥è·å–æ•°æ®çš„ç®€å•æ–¹å¼ï¼Œå¹¶ä¸”ä¸ä¼šä½¿æ•´ä¸ªé¡µé¢åˆ·æ–°ã€‚è¿™ä½¿å¾—ç½‘é¡µåªæ›´æ–°ä¸€éƒ¨åˆ†é¡µé¢è€Œä¸ä¼šæ‰“æ‰°åˆ°ç”¨æˆ·ã€‚XMLHttpRequest åœ¨ [AJAX](https://developer.mozilla.org/zh-CN/docs/AJAX) ä¸­è¢«å¤§é‡ä½¿ç”¨ã€‚\n\n## å…¼å®¹æ€§\n![](https://lh2907883.github.io/store/blog/%E5%85%B3%E4%BA%8EXMLHttpRequest/1.png)\n* IE8/IE9ä¹Ÿå®Œå…¨ä¸æ”¯æŒxhrå¯¹è±¡, ä¸è¿‡å¯ä»¥ä½¿ç”¨[ActiveXObject](https://msdn.microsoft.com/zh-cn/library/7sw4ddf8%28v=vs.94%29.aspx)ç±»ç”Ÿæˆxhrå®ä¾‹\n```javascript\nnew window.ActiveXObject( \"Microsoft.XMLHTTP\" )\n```\n* IE10/IE11éƒ¨åˆ†æ”¯æŒï¼Œä¸æ”¯æŒ xhr.responseTypeä¸ºjson\n\n## å¦‚ä½•ä½¿ç”¨\nä½¿ç”¨xhrç»™åå°serverå‘é€è¯·æ±‚,å¤§æ¦‚å¯ä»¥åˆ†ä¸‹é¢å‡ ä¸ªæ­¥éª¤\n### 1.å®ä¾‹åŒ–XMLHttpRequestå¯¹è±¡\n```javascript\nvar xhr = new XMLHttpRequest();\n```\n\n### 2.åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚\n```javascript\nxhr.open('POST', '/server', true);\n```\n``open(method, url [, async = true [, username = null [, password = null]]])``\n\nasync: é»˜è®¤å€¼ä¸ºtrueï¼Œå³ä¸ºå¼‚æ­¥è¯·æ±‚ï¼Œè‹¥async=falseï¼Œåˆ™ä¸ºåŒæ­¥è¯·æ±‚\n\n### 3.è®¾ç½®xhrå‚æ•°\n#### 3.1 è®¾ç½®request header\n1. é€šè¿‡è°ƒç”¨setRequestHeaderæ–¹æ³•,è®¾ç½®è¯·æ±‚å¤´,è¿™ä¸€æ­¥å¿…é¡»åœ¨``xhr.open``ä¹‹åè°ƒç”¨\n2. setRequestHeaderå¯ä»¥è°ƒç”¨å¤šæ¬¡ï¼Œæœ€ç»ˆçš„å€¼ä¸ä¼šé‡‡ç”¨è¦†ç›–overrideçš„æ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨è¿½åŠ appendçš„æ–¹å¼\n```javascript\nxhr.setRequestHeader('X-Test', 'one');\nxhr.setRequestHeader('X-Test', 'two');\n// æœ€ç»ˆrequest headerä¸­\"X-Test\"ä¸º: one, two\n```\n\n#### 3.2 è®¾ç½®response type\n1. å¯ä»¥è®¾ç½®``xhr.responseType``,ä¸‹é¢æ˜¯responseTypeæ”¯æŒçš„ç±»å‹\n\n| å€¼             | xhr.response æ•°æ®ç±»å‹         |  è¯´æ˜                               |\n| ------        | -------                       |   ------                           |\n| \"\"            | String                        | é»˜è®¤å€¼(åœ¨ä¸è®¾ç½®responseTypeæ—¶)        |\n| \"text\"        | String                        |                                    |\n| \"document\"    | [Document](https://developer.mozilla.org/zh-CN/docs/Web/API/Document) å¯¹è±¡                  | å¸Œæœ›è¿”å› XML æ ¼å¼æ•°æ®æ—¶ä½¿ç”¨           |\n| \"json\"        | javascript å¯¹è±¡                | å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼ŒIE10/IE11ä¸æ”¯æŒ       |\n| \"blob\"        | [Blob](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob)å¯¹è±¡                       |                                    |\n| \"arrayBuffer\" | [ArrayBuffer](https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer)å¯¹è±¡                |                                    |\nå®¢æˆ·ç«¯ä»£ç \n```javascript\nvar xhr = new XMLHttpRequest();\nxhr.open('GET', '/json');\nxhr.responseType = 'json';\nxhr.onreadystatechange = function(e) {\n    if (this.readyState == 4 && this.status == 200) {\n        //é€šè¿‡xhr.responseå¯ä»¥æ‹¿åˆ°è¿”å›çš„jsonæ•°æ®\n        console.log(this.response);\n    }\n};\nxhr.send();\n```\næœåŠ¡ç«¯ä»£ç \n```javascript\nif (req.url == '/json') {\n    res.writeHead(200, { 'content-type': 'application/json' });\n    res.write('{\"a\": 123, \"b\": \"dcs\"}');\n    res.end();\n}\n```\n\n2. é€šè¿‡è°ƒç”¨``xhr.overrideMimeType``æ–¹æ³•æ¥é‡å†™responseçš„content-type(ä¸è¿‡è¿™ä¸ªæ–¹æ³•æˆ‘è°ƒç”¨ä¹‹åå¹¶æ²¡æœ‰èµ·ä½œç”¨..)\n\n#### 3.3 è®¾ç½®è¯·æ±‚è¶…æ—¶\nå¯ä»¥è®¾ç½®``xhr.timeout``,æ¥è®¾ç½®è¶…æ—¶æ—¶é—´(å•ä½æ¯«ç§’),åœ¨xhr.send()æ–¹æ³•è°ƒç”¨åå¼€å§‹è®¡æ—¶\n\n#### 3.4 è®¾ç½®xhrçŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒ\n```javascript\nxhr.onreadystatechange = function () {\n    switch(xhr.readyState){\n        case 0://UNSENT,open()æ–¹æ³•æ²¡æœ‰è°ƒç”¨\n            break;\n        case 1://OPENED,open()æ–¹æ³•å·²è¢«æˆåŠŸè°ƒç”¨,send()æ–¹æ³•è¿˜æœªè¢«è°ƒç”¨ã€‚\n            break;\n        case 2://HEADERS_RECEIVED,send()æ–¹æ³•å·²ç»è¢«è°ƒç”¨, å“åº”å¤´å’Œå“åº”çŠ¶æ€å·²ç»è¿”å›\n            break;\n        case 3://LOADING,å“åº”ä½“ä¸‹è½½ä¸­,responseTextä¸­å·²ç»è·å–äº†éƒ¨åˆ†æ•°æ®.\n            break;\n        case 4://DONE,æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹å·²ç»å®Œæ¯•.\n            break;\n    }\n}\n```\n#### 3.5 xhrçš„äº‹ä»¶\n| äº‹ä»¶                | è§¦å‘æ¡ä»¶                          |\n| -----              | -------                          |\n| onreadystatechange |\tæ¯å½“xhr.readyStateæ”¹å˜æ—¶è§¦å‘ï¼›ä½†xhr.readyStateç”±é0å€¼å˜ä¸º0æ—¶ä¸è§¦å‘ã€‚ |\n| onloadstart\t     |  è°ƒç”¨xhr.send()æ–¹æ³•åç«‹å³è§¦å‘ï¼Œè‹¥xhr.send()æœªè¢«è°ƒç”¨åˆ™ä¸ä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚   |\n| onprogress         |\txhr.upload.onprogressåœ¨ä¸Šä¼ é˜¶æ®µ(å³xhr.send()ä¹‹åï¼Œxhr.readystate=2ä¹‹å‰)è§¦å‘ï¼›xhr.onprogressåœ¨ä¸‹è½½é˜¶æ®µï¼ˆå³xhr.readystate=3æ—¶ï¼‰è§¦å‘  |\n| onload             |\tå½“è¯·æ±‚æˆåŠŸå®Œæˆæ—¶è§¦å‘ï¼Œæ­¤æ—¶xhr.readystate=4   |\n| onloadend\t         |  å½“è¯·æ±‚ç»“æŸï¼ˆåŒ…æ‹¬è¯·æ±‚æˆåŠŸå’Œè¯·æ±‚å¤±è´¥ï¼‰æ—¶è§¦å‘   |\n| onabort            |\tå½“è°ƒç”¨xhr.abort()åè§¦å‘   |\n| ontimeout          |\txhr.timeoutä¸ç­‰äº0ï¼Œç”±è¯·æ±‚å¼€å§‹å³onloadstartå¼€å§‹ç®—èµ·ï¼Œå½“åˆ°è¾¾xhr.timeoutæ‰€è®¾ç½®æ—¶é—´è¯·æ±‚è¿˜æœªç»“æŸå³onloadendï¼Œåˆ™è§¦å‘æ­¤äº‹ä»¶ã€‚   |\n| onerror            |\tåœ¨è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œè‹¥å‘ç”ŸNetwork erroråˆ™ä¼šè§¦å‘æ­¤äº‹ä»¶ï¼ˆè‹¥å‘ç”ŸNetwork erroræ—¶ï¼Œä¸Šä¼ è¿˜æ²¡æœ‰ç»“æŸï¼Œåˆ™ä¼šå…ˆè§¦å‘xhr.upload.onerrorï¼Œå†è§¦å‘xhr.onerrorï¼›è‹¥å‘ç”ŸNetwork erroræ—¶ï¼Œä¸Šä¼ å·²ç»ç»“æŸï¼Œåˆ™åªä¼šè§¦å‘xhr.onerrorï¼‰ã€‚**æ³¨æ„**ï¼Œåªæœ‰å‘ç”Ÿäº†ç½‘ç»œå±‚çº§åˆ«çš„å¼‚å¸¸æ‰ä¼šè§¦å‘æ­¤äº‹ä»¶ï¼Œå¯¹äºåº”ç”¨å±‚çº§åˆ«çš„å¼‚å¸¸ï¼Œå¦‚å“åº”è¿”å›çš„xhr.statusCodeæ˜¯4xxæ—¶ï¼Œå¹¶ä¸å±äºNetwork errorï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘onerroräº‹ä»¶ï¼Œè€Œæ˜¯ä¼šè§¦å‘onloadäº‹ä»¶ã€‚    |\n\n### 4.å‘é€æ•°æ®\n```javascript\nxhr.send(data);\n```\n* å¯¹äºGET/HEADè¯·æ±‚``send``æ–¹æ³•é€šå¸¸ä¸ä¼ å‚æ•°\n* å¯¹äºPOST/DELETE/PUTè¯·æ±‚,``xhr.send(data)``çš„å‚æ•°dataå¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š\n    * [ArrayBuffer](https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer)\n    * [Blob](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob)\n    * [Document](https://developer.mozilla.org/zh-CN/docs/Web/API/Document)\n    * DOMString\n    * [FormData](https://developer.mozilla.org/zh-CN/docs/Web/API/FormData)\n\næ¥ä¸€ä¸ªğŸŒ°\n\nå®¢æˆ·ç«¯ä»£ç \n```javascript\nvar fileInputElement = document.getElementById('file')\n\nvar oMyForm = new FormData();\n\noMyForm.append(\"username\", \"dcs\");\noMyForm.append(\"num\", 123456); // æ•°å­—123456è¢«ç«‹å³è½¬æ¢æˆå­—ç¬¦ä¸²\"123456\"\n\n// fileInputElementä¸­å·²ç»åŒ…å«äº†ç”¨æˆ·æ‰€é€‰æ‹©çš„æ–‡ä»¶\nfor (var i = 0; i < fileInputElement.files.length; i++) {\n    oMyForm.append(\"file\", fileInputElement.files[i]);\n}\n\nvar oFileBody = '<a id=\"a\"><b id=\"b\">hey!</b></a>'; // Blobå¯¹è±¡åŒ…å«çš„æ–‡ä»¶å†…å®¹\nvar oBlob = new Blob([oFileBody], {\n    type: \"text/xml\"\n});\noMyForm.append(\"blob\", oBlob);\n\nvar xhr = new XMLHttpRequest();\nxhr.upload.onprogress = function(event) {\n    if (event.lengthComputable) {\n        var completedPercent = event.loaded / event.total;\n        console.log(completedPercent);\n    }\n}\nxhr.open(\"POST\", \"/upload\");\nxhr.send(oMyForm);\n```\næœåŠ¡ç«¯ä»£ç \n```javascript\nif (req.url == '/upload' && req.method.toLowerCase() == 'post') {\n    req.on('data', function(buffer) {\n        //ä¼šä¸æ—¶çš„è§¦å‘dataäº‹ä»¶æ¥æ¥å—å®¢æˆ·ç«¯ä¼ é€’çš„æ•°æ®\n    })\n    .on('end', function() {\n        //æ•°æ®ä¼ é€’å®Œæ¯•\n    });\n}\n```\n**æ³¨æ„**: å®¢æˆ·ç«¯çš„``xhr.upload.onprogress``è¡¨ç¤ºçš„æ˜¯ä¸Šä¼ è¿›åº¦è§¦å‘çš„å›è°ƒ(è¿›åº¦å–å†³äºå®¢æˆ·ç«¯çš„ç½‘ç»œçŠ¶å†µ),å‚æ•°``event.total``é’ˆå¯¹çš„æ˜¯æ‰€æœ‰fileçš„æ€»å¤§å°, è€ŒæœåŠ¡ç«¯çš„``req.on('data', function(){})``åªæ˜¯è¿™æ¬¡è¯·æ±‚çš„æ•°æ®æµæ¥å—ä¸€å®šé‡çš„æ•°æ®åè§¦å‘çš„å›è°ƒ,ä¸¤è€…ä¹‹é—´æ²¡æœ‰ç›´æ¥å…³ç³»\n\n## å‚è€ƒèµ„æ–™\n* [ä½ çœŸçš„ä¼šä½¿ç”¨XMLHttpRequestå—ï¼Ÿ](https://segmentfault.com/a/1190000004322487)\n* [MDN XMLHttpRequest](https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest)\n* [XMLHttpRequest2 æ–°æŠ€å·§](https://www.html5rocks.com/zh/tutorials/file/xhr2/)","source":"_posts/å…³äºXMLHttpRequest.md","raw":"---\ntitle: å…³äºXMLHttpRequest\ndate: 2017-05-07 12:37:45\ntags: javascript\n---\n## XMLHttpRequestæ˜¯ä»€ä¹ˆ\nXMLHttpRequest æ˜¯ä¸€ä¸ª[API](https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest), å®ƒä¸ºå®¢æˆ·ç«¯æä¾›äº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„åŠŸèƒ½ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé€šè¿‡ URL æ¥è·å–æ•°æ®çš„ç®€å•æ–¹å¼ï¼Œå¹¶ä¸”ä¸ä¼šä½¿æ•´ä¸ªé¡µé¢åˆ·æ–°ã€‚è¿™ä½¿å¾—ç½‘é¡µåªæ›´æ–°ä¸€éƒ¨åˆ†é¡µé¢è€Œä¸ä¼šæ‰“æ‰°åˆ°ç”¨æˆ·ã€‚XMLHttpRequest åœ¨ [AJAX](https://developer.mozilla.org/zh-CN/docs/AJAX) ä¸­è¢«å¤§é‡ä½¿ç”¨ã€‚\n\n## å…¼å®¹æ€§\n![](https://lh2907883.github.io/store/blog/%E5%85%B3%E4%BA%8EXMLHttpRequest/1.png)\n* IE8/IE9ä¹Ÿå®Œå…¨ä¸æ”¯æŒxhrå¯¹è±¡, ä¸è¿‡å¯ä»¥ä½¿ç”¨[ActiveXObject](https://msdn.microsoft.com/zh-cn/library/7sw4ddf8%28v=vs.94%29.aspx)ç±»ç”Ÿæˆxhrå®ä¾‹\n```javascript\nnew window.ActiveXObject( \"Microsoft.XMLHTTP\" )\n```\n* IE10/IE11éƒ¨åˆ†æ”¯æŒï¼Œä¸æ”¯æŒ xhr.responseTypeä¸ºjson\n\n## å¦‚ä½•ä½¿ç”¨\nä½¿ç”¨xhrç»™åå°serverå‘é€è¯·æ±‚,å¤§æ¦‚å¯ä»¥åˆ†ä¸‹é¢å‡ ä¸ªæ­¥éª¤\n### 1.å®ä¾‹åŒ–XMLHttpRequestå¯¹è±¡\n```javascript\nvar xhr = new XMLHttpRequest();\n```\n\n### 2.åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚\n```javascript\nxhr.open('POST', '/server', true);\n```\n``open(method, url [, async = true [, username = null [, password = null]]])``\n\nasync: é»˜è®¤å€¼ä¸ºtrueï¼Œå³ä¸ºå¼‚æ­¥è¯·æ±‚ï¼Œè‹¥async=falseï¼Œåˆ™ä¸ºåŒæ­¥è¯·æ±‚\n\n### 3.è®¾ç½®xhrå‚æ•°\n#### 3.1 è®¾ç½®request header\n1. é€šè¿‡è°ƒç”¨setRequestHeaderæ–¹æ³•,è®¾ç½®è¯·æ±‚å¤´,è¿™ä¸€æ­¥å¿…é¡»åœ¨``xhr.open``ä¹‹åè°ƒç”¨\n2. setRequestHeaderå¯ä»¥è°ƒç”¨å¤šæ¬¡ï¼Œæœ€ç»ˆçš„å€¼ä¸ä¼šé‡‡ç”¨è¦†ç›–overrideçš„æ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨è¿½åŠ appendçš„æ–¹å¼\n```javascript\nxhr.setRequestHeader('X-Test', 'one');\nxhr.setRequestHeader('X-Test', 'two');\n// æœ€ç»ˆrequest headerä¸­\"X-Test\"ä¸º: one, two\n```\n\n#### 3.2 è®¾ç½®response type\n1. å¯ä»¥è®¾ç½®``xhr.responseType``,ä¸‹é¢æ˜¯responseTypeæ”¯æŒçš„ç±»å‹\n\n| å€¼             | xhr.response æ•°æ®ç±»å‹         |  è¯´æ˜                               |\n| ------        | -------                       |   ------                           |\n| \"\"            | String                        | é»˜è®¤å€¼(åœ¨ä¸è®¾ç½®responseTypeæ—¶)        |\n| \"text\"        | String                        |                                    |\n| \"document\"    | [Document](https://developer.mozilla.org/zh-CN/docs/Web/API/Document) å¯¹è±¡                  | å¸Œæœ›è¿”å› XML æ ¼å¼æ•°æ®æ—¶ä½¿ç”¨           |\n| \"json\"        | javascript å¯¹è±¡                | å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼ŒIE10/IE11ä¸æ”¯æŒ       |\n| \"blob\"        | [Blob](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob)å¯¹è±¡                       |                                    |\n| \"arrayBuffer\" | [ArrayBuffer](https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer)å¯¹è±¡                |                                    |\nå®¢æˆ·ç«¯ä»£ç \n```javascript\nvar xhr = new XMLHttpRequest();\nxhr.open('GET', '/json');\nxhr.responseType = 'json';\nxhr.onreadystatechange = function(e) {\n    if (this.readyState == 4 && this.status == 200) {\n        //é€šè¿‡xhr.responseå¯ä»¥æ‹¿åˆ°è¿”å›çš„jsonæ•°æ®\n        console.log(this.response);\n    }\n};\nxhr.send();\n```\næœåŠ¡ç«¯ä»£ç \n```javascript\nif (req.url == '/json') {\n    res.writeHead(200, { 'content-type': 'application/json' });\n    res.write('{\"a\": 123, \"b\": \"dcs\"}');\n    res.end();\n}\n```\n\n2. é€šè¿‡è°ƒç”¨``xhr.overrideMimeType``æ–¹æ³•æ¥é‡å†™responseçš„content-type(ä¸è¿‡è¿™ä¸ªæ–¹æ³•æˆ‘è°ƒç”¨ä¹‹åå¹¶æ²¡æœ‰èµ·ä½œç”¨..)\n\n#### 3.3 è®¾ç½®è¯·æ±‚è¶…æ—¶\nå¯ä»¥è®¾ç½®``xhr.timeout``,æ¥è®¾ç½®è¶…æ—¶æ—¶é—´(å•ä½æ¯«ç§’),åœ¨xhr.send()æ–¹æ³•è°ƒç”¨åå¼€å§‹è®¡æ—¶\n\n#### 3.4 è®¾ç½®xhrçŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒ\n```javascript\nxhr.onreadystatechange = function () {\n    switch(xhr.readyState){\n        case 0://UNSENT,open()æ–¹æ³•æ²¡æœ‰è°ƒç”¨\n            break;\n        case 1://OPENED,open()æ–¹æ³•å·²è¢«æˆåŠŸè°ƒç”¨,send()æ–¹æ³•è¿˜æœªè¢«è°ƒç”¨ã€‚\n            break;\n        case 2://HEADERS_RECEIVED,send()æ–¹æ³•å·²ç»è¢«è°ƒç”¨, å“åº”å¤´å’Œå“åº”çŠ¶æ€å·²ç»è¿”å›\n            break;\n        case 3://LOADING,å“åº”ä½“ä¸‹è½½ä¸­,responseTextä¸­å·²ç»è·å–äº†éƒ¨åˆ†æ•°æ®.\n            break;\n        case 4://DONE,æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹å·²ç»å®Œæ¯•.\n            break;\n    }\n}\n```\n#### 3.5 xhrçš„äº‹ä»¶\n| äº‹ä»¶                | è§¦å‘æ¡ä»¶                          |\n| -----              | -------                          |\n| onreadystatechange |\tæ¯å½“xhr.readyStateæ”¹å˜æ—¶è§¦å‘ï¼›ä½†xhr.readyStateç”±é0å€¼å˜ä¸º0æ—¶ä¸è§¦å‘ã€‚ |\n| onloadstart\t     |  è°ƒç”¨xhr.send()æ–¹æ³•åç«‹å³è§¦å‘ï¼Œè‹¥xhr.send()æœªè¢«è°ƒç”¨åˆ™ä¸ä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚   |\n| onprogress         |\txhr.upload.onprogressåœ¨ä¸Šä¼ é˜¶æ®µ(å³xhr.send()ä¹‹åï¼Œxhr.readystate=2ä¹‹å‰)è§¦å‘ï¼›xhr.onprogressåœ¨ä¸‹è½½é˜¶æ®µï¼ˆå³xhr.readystate=3æ—¶ï¼‰è§¦å‘  |\n| onload             |\tå½“è¯·æ±‚æˆåŠŸå®Œæˆæ—¶è§¦å‘ï¼Œæ­¤æ—¶xhr.readystate=4   |\n| onloadend\t         |  å½“è¯·æ±‚ç»“æŸï¼ˆåŒ…æ‹¬è¯·æ±‚æˆåŠŸå’Œè¯·æ±‚å¤±è´¥ï¼‰æ—¶è§¦å‘   |\n| onabort            |\tå½“è°ƒç”¨xhr.abort()åè§¦å‘   |\n| ontimeout          |\txhr.timeoutä¸ç­‰äº0ï¼Œç”±è¯·æ±‚å¼€å§‹å³onloadstartå¼€å§‹ç®—èµ·ï¼Œå½“åˆ°è¾¾xhr.timeoutæ‰€è®¾ç½®æ—¶é—´è¯·æ±‚è¿˜æœªç»“æŸå³onloadendï¼Œåˆ™è§¦å‘æ­¤äº‹ä»¶ã€‚   |\n| onerror            |\tåœ¨è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œè‹¥å‘ç”ŸNetwork erroråˆ™ä¼šè§¦å‘æ­¤äº‹ä»¶ï¼ˆè‹¥å‘ç”ŸNetwork erroræ—¶ï¼Œä¸Šä¼ è¿˜æ²¡æœ‰ç»“æŸï¼Œåˆ™ä¼šå…ˆè§¦å‘xhr.upload.onerrorï¼Œå†è§¦å‘xhr.onerrorï¼›è‹¥å‘ç”ŸNetwork erroræ—¶ï¼Œä¸Šä¼ å·²ç»ç»“æŸï¼Œåˆ™åªä¼šè§¦å‘xhr.onerrorï¼‰ã€‚**æ³¨æ„**ï¼Œåªæœ‰å‘ç”Ÿäº†ç½‘ç»œå±‚çº§åˆ«çš„å¼‚å¸¸æ‰ä¼šè§¦å‘æ­¤äº‹ä»¶ï¼Œå¯¹äºåº”ç”¨å±‚çº§åˆ«çš„å¼‚å¸¸ï¼Œå¦‚å“åº”è¿”å›çš„xhr.statusCodeæ˜¯4xxæ—¶ï¼Œå¹¶ä¸å±äºNetwork errorï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘onerroräº‹ä»¶ï¼Œè€Œæ˜¯ä¼šè§¦å‘onloadäº‹ä»¶ã€‚    |\n\n### 4.å‘é€æ•°æ®\n```javascript\nxhr.send(data);\n```\n* å¯¹äºGET/HEADè¯·æ±‚``send``æ–¹æ³•é€šå¸¸ä¸ä¼ å‚æ•°\n* å¯¹äºPOST/DELETE/PUTè¯·æ±‚,``xhr.send(data)``çš„å‚æ•°dataå¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š\n    * [ArrayBuffer](https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer)\n    * [Blob](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob)\n    * [Document](https://developer.mozilla.org/zh-CN/docs/Web/API/Document)\n    * DOMString\n    * [FormData](https://developer.mozilla.org/zh-CN/docs/Web/API/FormData)\n\næ¥ä¸€ä¸ªğŸŒ°\n\nå®¢æˆ·ç«¯ä»£ç \n```javascript\nvar fileInputElement = document.getElementById('file')\n\nvar oMyForm = new FormData();\n\noMyForm.append(\"username\", \"dcs\");\noMyForm.append(\"num\", 123456); // æ•°å­—123456è¢«ç«‹å³è½¬æ¢æˆå­—ç¬¦ä¸²\"123456\"\n\n// fileInputElementä¸­å·²ç»åŒ…å«äº†ç”¨æˆ·æ‰€é€‰æ‹©çš„æ–‡ä»¶\nfor (var i = 0; i < fileInputElement.files.length; i++) {\n    oMyForm.append(\"file\", fileInputElement.files[i]);\n}\n\nvar oFileBody = '<a id=\"a\"><b id=\"b\">hey!</b></a>'; // Blobå¯¹è±¡åŒ…å«çš„æ–‡ä»¶å†…å®¹\nvar oBlob = new Blob([oFileBody], {\n    type: \"text/xml\"\n});\noMyForm.append(\"blob\", oBlob);\n\nvar xhr = new XMLHttpRequest();\nxhr.upload.onprogress = function(event) {\n    if (event.lengthComputable) {\n        var completedPercent = event.loaded / event.total;\n        console.log(completedPercent);\n    }\n}\nxhr.open(\"POST\", \"/upload\");\nxhr.send(oMyForm);\n```\næœåŠ¡ç«¯ä»£ç \n```javascript\nif (req.url == '/upload' && req.method.toLowerCase() == 'post') {\n    req.on('data', function(buffer) {\n        //ä¼šä¸æ—¶çš„è§¦å‘dataäº‹ä»¶æ¥æ¥å—å®¢æˆ·ç«¯ä¼ é€’çš„æ•°æ®\n    })\n    .on('end', function() {\n        //æ•°æ®ä¼ é€’å®Œæ¯•\n    });\n}\n```\n**æ³¨æ„**: å®¢æˆ·ç«¯çš„``xhr.upload.onprogress``è¡¨ç¤ºçš„æ˜¯ä¸Šä¼ è¿›åº¦è§¦å‘çš„å›è°ƒ(è¿›åº¦å–å†³äºå®¢æˆ·ç«¯çš„ç½‘ç»œçŠ¶å†µ),å‚æ•°``event.total``é’ˆå¯¹çš„æ˜¯æ‰€æœ‰fileçš„æ€»å¤§å°, è€ŒæœåŠ¡ç«¯çš„``req.on('data', function(){})``åªæ˜¯è¿™æ¬¡è¯·æ±‚çš„æ•°æ®æµæ¥å—ä¸€å®šé‡çš„æ•°æ®åè§¦å‘çš„å›è°ƒ,ä¸¤è€…ä¹‹é—´æ²¡æœ‰ç›´æ¥å…³ç³»\n\n## å‚è€ƒèµ„æ–™\n* [ä½ çœŸçš„ä¼šä½¿ç”¨XMLHttpRequestå—ï¼Ÿ](https://segmentfault.com/a/1190000004322487)\n* [MDN XMLHttpRequest](https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest)\n* [XMLHttpRequest2 æ–°æŠ€å·§](https://www.html5rocks.com/zh/tutorials/file/xhr2/)","slug":"å…³äºXMLHttpRequest","published":1,"updated":"2017-05-07T15:34:46.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2evu1b90001yptxejlt38sf","content":"<h2 id=\"XMLHttpRequestæ˜¯ä»€ä¹ˆ\"><a href=\"#XMLHttpRequestæ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"XMLHttpRequestæ˜¯ä»€ä¹ˆ\"></a>XMLHttpRequestæ˜¯ä»€ä¹ˆ</h2><p>XMLHttpRequest æ˜¯ä¸€ä¸ª<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest\" target=\"_blank\" rel=\"external\">API</a>, å®ƒä¸ºå®¢æˆ·ç«¯æä¾›äº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„åŠŸèƒ½ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé€šè¿‡ URL æ¥è·å–æ•°æ®çš„ç®€å•æ–¹å¼ï¼Œå¹¶ä¸”ä¸ä¼šä½¿æ•´ä¸ªé¡µé¢åˆ·æ–°ã€‚è¿™ä½¿å¾—ç½‘é¡µåªæ›´æ–°ä¸€éƒ¨åˆ†é¡µé¢è€Œä¸ä¼šæ‰“æ‰°åˆ°ç”¨æˆ·ã€‚XMLHttpRequest åœ¨ <a href=\"https://developer.mozilla.org/zh-CN/docs/AJAX\" target=\"_blank\" rel=\"external\">AJAX</a> ä¸­è¢«å¤§é‡ä½¿ç”¨ã€‚</p>\n<h2 id=\"å…¼å®¹æ€§\"><a href=\"#å…¼å®¹æ€§\" class=\"headerlink\" title=\"å…¼å®¹æ€§\"></a>å…¼å®¹æ€§</h2><p><img src=\"https://lh2907883.github.io/store/blog/%E5%85%B3%E4%BA%8EXMLHttpRequest/1.png\" alt=\"\"></p>\n<ul>\n<li><p>IE8/IE9ä¹Ÿå®Œå…¨ä¸æ”¯æŒxhrå¯¹è±¡, ä¸è¿‡å¯ä»¥ä½¿ç”¨<a href=\"https://msdn.microsoft.com/zh-cn/library/7sw4ddf8%28v=vs.94%29.aspx\" target=\"_blank\" rel=\"external\">ActiveXObject</a>ç±»ç”Ÿæˆxhrå®ä¾‹</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">window</span>.ActiveXObject( <span class=\"string\">\"Microsoft.XMLHTTP\"</span> )</div></pre></td></tr></table></figure>\n</li>\n<li><p>IE10/IE11éƒ¨åˆ†æ”¯æŒï¼Œä¸æ”¯æŒ xhr.responseTypeä¸ºjson</p>\n</li>\n</ul>\n<h2 id=\"å¦‚ä½•ä½¿ç”¨\"><a href=\"#å¦‚ä½•ä½¿ç”¨\" class=\"headerlink\" title=\"å¦‚ä½•ä½¿ç”¨\"></a>å¦‚ä½•ä½¿ç”¨</h2><p>ä½¿ç”¨xhrç»™åå°serverå‘é€è¯·æ±‚,å¤§æ¦‚å¯ä»¥åˆ†ä¸‹é¢å‡ ä¸ªæ­¥éª¤</p>\n<h3 id=\"1-å®ä¾‹åŒ–XMLHttpRequestå¯¹è±¡\"><a href=\"#1-å®ä¾‹åŒ–XMLHttpRequestå¯¹è±¡\" class=\"headerlink\" title=\"1.å®ä¾‹åŒ–XMLHttpRequestå¯¹è±¡\"></a>1.å®ä¾‹åŒ–XMLHttpRequestå¯¹è±¡</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</div></pre></td></tr></table></figure>\n<h3 id=\"2-åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚\"><a href=\"#2-åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚\" class=\"headerlink\" title=\"2.åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚\"></a>2.åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">xhr.open(<span class=\"string\">'POST'</span>, <span class=\"string\">'/server'</span>, <span class=\"literal\">true</span>);</div></pre></td></tr></table></figure>\n<p><code>open(method, url [, async = true [, username = null [, password = null]]])</code></p>\n<p>async: é»˜è®¤å€¼ä¸ºtrueï¼Œå³ä¸ºå¼‚æ­¥è¯·æ±‚ï¼Œè‹¥async=falseï¼Œåˆ™ä¸ºåŒæ­¥è¯·æ±‚</p>\n<h3 id=\"3-è®¾ç½®xhrå‚æ•°\"><a href=\"#3-è®¾ç½®xhrå‚æ•°\" class=\"headerlink\" title=\"3.è®¾ç½®xhrå‚æ•°\"></a>3.è®¾ç½®xhrå‚æ•°</h3><h4 id=\"3-1-è®¾ç½®request-header\"><a href=\"#3-1-è®¾ç½®request-header\" class=\"headerlink\" title=\"3.1 è®¾ç½®request header\"></a>3.1 è®¾ç½®request header</h4><ol>\n<li>é€šè¿‡è°ƒç”¨setRequestHeaderæ–¹æ³•,è®¾ç½®è¯·æ±‚å¤´,è¿™ä¸€æ­¥å¿…é¡»åœ¨<code>xhr.open</code>ä¹‹åè°ƒç”¨</li>\n<li>setRequestHeaderå¯ä»¥è°ƒç”¨å¤šæ¬¡ï¼Œæœ€ç»ˆçš„å€¼ä¸ä¼šé‡‡ç”¨è¦†ç›–overrideçš„æ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨è¿½åŠ appendçš„æ–¹å¼<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">xhr.setRequestHeader(<span class=\"string\">'X-Test'</span>, <span class=\"string\">'one'</span>);</div><div class=\"line\">xhr.setRequestHeader(<span class=\"string\">'X-Test'</span>, <span class=\"string\">'two'</span>);</div><div class=\"line\"><span class=\"comment\">// æœ€ç»ˆrequest headerä¸­\"X-Test\"ä¸º: one, two</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h4 id=\"3-2-è®¾ç½®response-type\"><a href=\"#3-2-è®¾ç½®response-type\" class=\"headerlink\" title=\"3.2 è®¾ç½®response type\"></a>3.2 è®¾ç½®response type</h4><ol>\n<li>å¯ä»¥è®¾ç½®<code>xhr.responseType</code>,ä¸‹é¢æ˜¯responseTypeæ”¯æŒçš„ç±»å‹</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>å€¼</th>\n<th>xhr.response æ•°æ®ç±»å‹</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>â€œâ€</td>\n<td>String</td>\n<td>é»˜è®¤å€¼(åœ¨ä¸è®¾ç½®responseTypeæ—¶)</td>\n</tr>\n<tr>\n<td>â€œtextâ€</td>\n<td>String</td>\n<td></td>\n</tr>\n<tr>\n<td>â€œdocumentâ€</td>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document\" target=\"_blank\" rel=\"external\">Document</a> å¯¹è±¡</td>\n<td>å¸Œæœ›è¿”å› XML æ ¼å¼æ•°æ®æ—¶ä½¿ç”¨</td>\n</tr>\n<tr>\n<td>â€œjsonâ€</td>\n<td>javascript å¯¹è±¡</td>\n<td>å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼ŒIE10/IE11ä¸æ”¯æŒ</td>\n</tr>\n<tr>\n<td>â€œblobâ€</td>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob\" target=\"_blank\" rel=\"external\">Blob</a>å¯¹è±¡</td>\n<td></td>\n</tr>\n<tr>\n<td>â€œarrayBufferâ€</td>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer\" target=\"_blank\" rel=\"external\">ArrayBuffer</a>å¯¹è±¡</td>\n</tr>\n</tbody>\n</table>\n<p>å®¢æˆ·ç«¯ä»£ç <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</div><div class=\"line\">xhr.open(<span class=\"string\">'GET'</span>, <span class=\"string\">'/json'</span>);</div><div class=\"line\">xhr.responseType = <span class=\"string\">'json'</span>;</div><div class=\"line\">xhr.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.readyState == <span class=\"number\">4</span> &amp;&amp; <span class=\"keyword\">this</span>.status == <span class=\"number\">200</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">//é€šè¿‡xhr.responseå¯ä»¥æ‹¿åˆ°è¿”å›çš„jsonæ•°æ®</span></div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.response);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\">xhr.send();</div></pre></td></tr></table></figure></p>\n<p>æœåŠ¡ç«¯ä»£ç <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (req.url == <span class=\"string\">'/json'</span>) &#123;</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>, &#123; <span class=\"string\">'content-type'</span>: <span class=\"string\">'application/json'</span> &#125;);</div><div class=\"line\">    res.write(<span class=\"string\">'&#123;\"a\": 123, \"b\": \"dcs\"&#125;'</span>);</div><div class=\"line\">    res.end();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<ol>\n<li>é€šè¿‡è°ƒç”¨<code>xhr.overrideMimeType</code>æ–¹æ³•æ¥é‡å†™responseçš„content-type(ä¸è¿‡è¿™ä¸ªæ–¹æ³•æˆ‘è°ƒç”¨ä¹‹åå¹¶æ²¡æœ‰èµ·ä½œç”¨..)</li>\n</ol>\n<h4 id=\"3-3-è®¾ç½®è¯·æ±‚è¶…æ—¶\"><a href=\"#3-3-è®¾ç½®è¯·æ±‚è¶…æ—¶\" class=\"headerlink\" title=\"3.3 è®¾ç½®è¯·æ±‚è¶…æ—¶\"></a>3.3 è®¾ç½®è¯·æ±‚è¶…æ—¶</h4><p>å¯ä»¥è®¾ç½®<code>xhr.timeout</code>,æ¥è®¾ç½®è¶…æ—¶æ—¶é—´(å•ä½æ¯«ç§’),åœ¨xhr.send()æ–¹æ³•è°ƒç”¨åå¼€å§‹è®¡æ—¶</p>\n<h4 id=\"3-4-è®¾ç½®xhrçŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒ\"><a href=\"#3-4-è®¾ç½®xhrçŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒ\" class=\"headerlink\" title=\"3.4 è®¾ç½®xhrçŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒ\"></a>3.4 è®¾ç½®xhrçŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒ</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">xhr.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span>(xhr.readyState)&#123;</div><div class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0</span>:<span class=\"comment\">//UNSENT,open()æ–¹æ³•æ²¡æœ‰è°ƒç”¨</span></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">1</span>:<span class=\"comment\">//OPENED,open()æ–¹æ³•å·²è¢«æˆåŠŸè°ƒç”¨,send()æ–¹æ³•è¿˜æœªè¢«è°ƒç”¨ã€‚</span></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">2</span>:<span class=\"comment\">//HEADERS_RECEIVED,send()æ–¹æ³•å·²ç»è¢«è°ƒç”¨, å“åº”å¤´å’Œå“åº”çŠ¶æ€å·²ç»è¿”å›</span></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">3</span>:<span class=\"comment\">//LOADING,å“åº”ä½“ä¸‹è½½ä¸­,responseTextä¸­å·²ç»è·å–äº†éƒ¨åˆ†æ•°æ®.</span></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">4</span>:<span class=\"comment\">//DONE,æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹å·²ç»å®Œæ¯•.</span></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"3-5-xhrçš„äº‹ä»¶\"><a href=\"#3-5-xhrçš„äº‹ä»¶\" class=\"headerlink\" title=\"3.5 xhrçš„äº‹ä»¶\"></a>3.5 xhrçš„äº‹ä»¶</h4><table>\n<thead>\n<tr>\n<th>äº‹ä»¶</th>\n<th>è§¦å‘æ¡ä»¶</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>onreadystatechange</td>\n<td>æ¯å½“xhr.readyStateæ”¹å˜æ—¶è§¦å‘ï¼›ä½†xhr.readyStateç”±é0å€¼å˜ä¸º0æ—¶ä¸è§¦å‘ã€‚</td>\n</tr>\n<tr>\n<td>onloadstart</td>\n<td>è°ƒç”¨xhr.send()æ–¹æ³•åç«‹å³è§¦å‘ï¼Œè‹¥xhr.send()æœªè¢«è°ƒç”¨åˆ™ä¸ä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚</td>\n</tr>\n<tr>\n<td>onprogress</td>\n<td>xhr.upload.onprogressåœ¨ä¸Šä¼ é˜¶æ®µ(å³xhr.send()ä¹‹åï¼Œxhr.readystate=2ä¹‹å‰)è§¦å‘ï¼›xhr.onprogressåœ¨ä¸‹è½½é˜¶æ®µï¼ˆå³xhr.readystate=3æ—¶ï¼‰è§¦å‘</td>\n</tr>\n<tr>\n<td>onload</td>\n<td>å½“è¯·æ±‚æˆåŠŸå®Œæˆæ—¶è§¦å‘ï¼Œæ­¤æ—¶xhr.readystate=4</td>\n</tr>\n<tr>\n<td>onloadend</td>\n<td>å½“è¯·æ±‚ç»“æŸï¼ˆåŒ…æ‹¬è¯·æ±‚æˆåŠŸå’Œè¯·æ±‚å¤±è´¥ï¼‰æ—¶è§¦å‘</td>\n</tr>\n<tr>\n<td>onabort</td>\n<td>å½“è°ƒç”¨xhr.abort()åè§¦å‘</td>\n</tr>\n<tr>\n<td>ontimeout</td>\n<td>xhr.timeoutä¸ç­‰äº0ï¼Œç”±è¯·æ±‚å¼€å§‹å³onloadstartå¼€å§‹ç®—èµ·ï¼Œå½“åˆ°è¾¾xhr.timeoutæ‰€è®¾ç½®æ—¶é—´è¯·æ±‚è¿˜æœªç»“æŸå³onloadendï¼Œåˆ™è§¦å‘æ­¤äº‹ä»¶ã€‚</td>\n</tr>\n<tr>\n<td>onerror</td>\n<td>åœ¨è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œè‹¥å‘ç”ŸNetwork erroråˆ™ä¼šè§¦å‘æ­¤äº‹ä»¶ï¼ˆè‹¥å‘ç”ŸNetwork erroræ—¶ï¼Œä¸Šä¼ è¿˜æ²¡æœ‰ç»“æŸï¼Œåˆ™ä¼šå…ˆè§¦å‘xhr.upload.onerrorï¼Œå†è§¦å‘xhr.onerrorï¼›è‹¥å‘ç”ŸNetwork erroræ—¶ï¼Œä¸Šä¼ å·²ç»ç»“æŸï¼Œåˆ™åªä¼šè§¦å‘xhr.onerrorï¼‰ã€‚<strong>æ³¨æ„</strong>ï¼Œåªæœ‰å‘ç”Ÿäº†ç½‘ç»œå±‚çº§åˆ«çš„å¼‚å¸¸æ‰ä¼šè§¦å‘æ­¤äº‹ä»¶ï¼Œå¯¹äºåº”ç”¨å±‚çº§åˆ«çš„å¼‚å¸¸ï¼Œå¦‚å“åº”è¿”å›çš„xhr.statusCodeæ˜¯4xxæ—¶ï¼Œå¹¶ä¸å±äºNetwork errorï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘onerroräº‹ä»¶ï¼Œè€Œæ˜¯ä¼šè§¦å‘onloadäº‹ä»¶ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"4-å‘é€æ•°æ®\"><a href=\"#4-å‘é€æ•°æ®\" class=\"headerlink\" title=\"4.å‘é€æ•°æ®\"></a>4.å‘é€æ•°æ®</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">xhr.send(data);</div></pre></td></tr></table></figure>\n<ul>\n<li>å¯¹äºGET/HEADè¯·æ±‚<code>send</code>æ–¹æ³•é€šå¸¸ä¸ä¼ å‚æ•°</li>\n<li>å¯¹äºPOST/DELETE/PUTè¯·æ±‚,<code>xhr.send(data)</code>çš„å‚æ•°dataå¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š<ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer\" target=\"_blank\" rel=\"external\">ArrayBuffer</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob\" target=\"_blank\" rel=\"external\">Blob</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document\" target=\"_blank\" rel=\"external\">Document</a></li>\n<li>DOMString</li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FormData\" target=\"_blank\" rel=\"external\">FormData</a></li>\n</ul>\n</li>\n</ul>\n<p>æ¥ä¸€ä¸ªğŸŒ°</p>\n<p>å®¢æˆ·ç«¯ä»£ç <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> fileInputElement = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'file'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> oMyForm = <span class=\"keyword\">new</span> FormData();</div><div class=\"line\"></div><div class=\"line\">oMyForm.append(<span class=\"string\">\"username\"</span>, <span class=\"string\">\"dcs\"</span>);</div><div class=\"line\">oMyForm.append(<span class=\"string\">\"num\"</span>, <span class=\"number\">123456</span>); <span class=\"comment\">// æ•°å­—123456è¢«ç«‹å³è½¬æ¢æˆå­—ç¬¦ä¸²\"123456\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// fileInputElementä¸­å·²ç»åŒ…å«äº†ç”¨æˆ·æ‰€é€‰æ‹©çš„æ–‡ä»¶</span></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; fileInputElement.files.length; i++) &#123;</div><div class=\"line\">    oMyForm.append(<span class=\"string\">\"file\"</span>, fileInputElement.files[i]);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> oFileBody = <span class=\"string\">'&lt;a id=\"a\"&gt;&lt;b id=\"b\"&gt;hey!&lt;/b&gt;&lt;/a&gt;'</span>; <span class=\"comment\">// Blobå¯¹è±¡åŒ…å«çš„æ–‡ä»¶å†…å®¹</span></div><div class=\"line\"><span class=\"keyword\">var</span> oBlob = <span class=\"keyword\">new</span> Blob([oFileBody], &#123;</div><div class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">\"text/xml\"</span></div><div class=\"line\">&#125;);</div><div class=\"line\">oMyForm.append(<span class=\"string\">\"blob\"</span>, oBlob);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</div><div class=\"line\">xhr.upload.onprogress = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (event.lengthComputable) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> completedPercent = event.loaded / event.total;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(completedPercent);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">xhr.open(<span class=\"string\">\"POST\"</span>, <span class=\"string\">\"/upload\"</span>);</div><div class=\"line\">xhr.send(oMyForm);</div></pre></td></tr></table></figure></p>\n<p>æœåŠ¡ç«¯ä»£ç <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (req.url == <span class=\"string\">'/upload'</span> &amp;&amp; req.method.toLowerCase() == <span class=\"string\">'post'</span>) &#123;</div><div class=\"line\">    req.on(<span class=\"string\">'data'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">buffer</span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//ä¼šä¸æ—¶çš„è§¦å‘dataäº‹ä»¶æ¥æ¥å—å®¢æˆ·ç«¯ä¼ é€’çš„æ•°æ®</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">    .on(<span class=\"string\">'end'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//æ•°æ®ä¼ é€’å®Œæ¯•</span></div><div class=\"line\">    &#125;);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><strong>æ³¨æ„</strong>: å®¢æˆ·ç«¯çš„<code>xhr.upload.onprogress</code>è¡¨ç¤ºçš„æ˜¯ä¸Šä¼ è¿›åº¦è§¦å‘çš„å›è°ƒ(è¿›åº¦å–å†³äºå®¢æˆ·ç«¯çš„ç½‘ç»œçŠ¶å†µ),å‚æ•°<code>event.total</code>é’ˆå¯¹çš„æ˜¯æ‰€æœ‰fileçš„æ€»å¤§å°, è€ŒæœåŠ¡ç«¯çš„<code>req.on(&#39;data&#39;, function(){})</code>åªæ˜¯è¿™æ¬¡è¯·æ±‚çš„æ•°æ®æµæ¥å—ä¸€å®šé‡çš„æ•°æ®åè§¦å‘çš„å›è°ƒ,ä¸¤è€…ä¹‹é—´æ²¡æœ‰ç›´æ¥å…³ç³»</p>\n<h2 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h2><ul>\n<li><a href=\"https://segmentfault.com/a/1190000004322487\" target=\"_blank\" rel=\"external\">ä½ çœŸçš„ä¼šä½¿ç”¨XMLHttpRequestå—ï¼Ÿ</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest\" target=\"_blank\" rel=\"external\">MDN XMLHttpRequest</a></li>\n<li><a href=\"https://www.html5rocks.com/zh/tutorials/file/xhr2/\" target=\"_blank\" rel=\"external\">XMLHttpRequest2 æ–°æŠ€å·§</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"XMLHttpRequestæ˜¯ä»€ä¹ˆ\"><a href=\"#XMLHttpRequestæ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"XMLHttpRequestæ˜¯ä»€ä¹ˆ\"></a>XMLHttpRequestæ˜¯ä»€ä¹ˆ</h2><p>XMLHttpRequest æ˜¯ä¸€ä¸ª<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest\" target=\"_blank\" rel=\"external\">API</a>, å®ƒä¸ºå®¢æˆ·ç«¯æä¾›äº†åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“æ•°æ®çš„åŠŸèƒ½ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé€šè¿‡ URL æ¥è·å–æ•°æ®çš„ç®€å•æ–¹å¼ï¼Œå¹¶ä¸”ä¸ä¼šä½¿æ•´ä¸ªé¡µé¢åˆ·æ–°ã€‚è¿™ä½¿å¾—ç½‘é¡µåªæ›´æ–°ä¸€éƒ¨åˆ†é¡µé¢è€Œä¸ä¼šæ‰“æ‰°åˆ°ç”¨æˆ·ã€‚XMLHttpRequest åœ¨ <a href=\"https://developer.mozilla.org/zh-CN/docs/AJAX\" target=\"_blank\" rel=\"external\">AJAX</a> ä¸­è¢«å¤§é‡ä½¿ç”¨ã€‚</p>\n<h2 id=\"å…¼å®¹æ€§\"><a href=\"#å…¼å®¹æ€§\" class=\"headerlink\" title=\"å…¼å®¹æ€§\"></a>å…¼å®¹æ€§</h2><p><img src=\"https://lh2907883.github.io/store/blog/%E5%85%B3%E4%BA%8EXMLHttpRequest/1.png\" alt=\"\"></p>\n<ul>\n<li><p>IE8/IE9ä¹Ÿå®Œå…¨ä¸æ”¯æŒxhrå¯¹è±¡, ä¸è¿‡å¯ä»¥ä½¿ç”¨<a href=\"https://msdn.microsoft.com/zh-cn/library/7sw4ddf8%28v=vs.94%29.aspx\" target=\"_blank\" rel=\"external\">ActiveXObject</a>ç±»ç”Ÿæˆxhrå®ä¾‹</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">window</span>.ActiveXObject( <span class=\"string\">\"Microsoft.XMLHTTP\"</span> )</div></pre></td></tr></table></figure>\n</li>\n<li><p>IE10/IE11éƒ¨åˆ†æ”¯æŒï¼Œä¸æ”¯æŒ xhr.responseTypeä¸ºjson</p>\n</li>\n</ul>\n<h2 id=\"å¦‚ä½•ä½¿ç”¨\"><a href=\"#å¦‚ä½•ä½¿ç”¨\" class=\"headerlink\" title=\"å¦‚ä½•ä½¿ç”¨\"></a>å¦‚ä½•ä½¿ç”¨</h2><p>ä½¿ç”¨xhrç»™åå°serverå‘é€è¯·æ±‚,å¤§æ¦‚å¯ä»¥åˆ†ä¸‹é¢å‡ ä¸ªæ­¥éª¤</p>\n<h3 id=\"1-å®ä¾‹åŒ–XMLHttpRequestå¯¹è±¡\"><a href=\"#1-å®ä¾‹åŒ–XMLHttpRequestå¯¹è±¡\" class=\"headerlink\" title=\"1.å®ä¾‹åŒ–XMLHttpRequestå¯¹è±¡\"></a>1.å®ä¾‹åŒ–XMLHttpRequestå¯¹è±¡</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</div></pre></td></tr></table></figure>\n<h3 id=\"2-åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚\"><a href=\"#2-åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚\" class=\"headerlink\" title=\"2.åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚\"></a>2.åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">xhr.open(<span class=\"string\">'POST'</span>, <span class=\"string\">'/server'</span>, <span class=\"literal\">true</span>);</div></pre></td></tr></table></figure>\n<p><code>open(method, url [, async = true [, username = null [, password = null]]])</code></p>\n<p>async: é»˜è®¤å€¼ä¸ºtrueï¼Œå³ä¸ºå¼‚æ­¥è¯·æ±‚ï¼Œè‹¥async=falseï¼Œåˆ™ä¸ºåŒæ­¥è¯·æ±‚</p>\n<h3 id=\"3-è®¾ç½®xhrå‚æ•°\"><a href=\"#3-è®¾ç½®xhrå‚æ•°\" class=\"headerlink\" title=\"3.è®¾ç½®xhrå‚æ•°\"></a>3.è®¾ç½®xhrå‚æ•°</h3><h4 id=\"3-1-è®¾ç½®request-header\"><a href=\"#3-1-è®¾ç½®request-header\" class=\"headerlink\" title=\"3.1 è®¾ç½®request header\"></a>3.1 è®¾ç½®request header</h4><ol>\n<li>é€šè¿‡è°ƒç”¨setRequestHeaderæ–¹æ³•,è®¾ç½®è¯·æ±‚å¤´,è¿™ä¸€æ­¥å¿…é¡»åœ¨<code>xhr.open</code>ä¹‹åè°ƒç”¨</li>\n<li>setRequestHeaderå¯ä»¥è°ƒç”¨å¤šæ¬¡ï¼Œæœ€ç»ˆçš„å€¼ä¸ä¼šé‡‡ç”¨è¦†ç›–overrideçš„æ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨è¿½åŠ appendçš„æ–¹å¼<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">xhr.setRequestHeader(<span class=\"string\">'X-Test'</span>, <span class=\"string\">'one'</span>);</div><div class=\"line\">xhr.setRequestHeader(<span class=\"string\">'X-Test'</span>, <span class=\"string\">'two'</span>);</div><div class=\"line\"><span class=\"comment\">// æœ€ç»ˆrequest headerä¸­\"X-Test\"ä¸º: one, two</span></div></pre></td></tr></table></figure>\n</li>\n</ol>\n<h4 id=\"3-2-è®¾ç½®response-type\"><a href=\"#3-2-è®¾ç½®response-type\" class=\"headerlink\" title=\"3.2 è®¾ç½®response type\"></a>3.2 è®¾ç½®response type</h4><ol>\n<li>å¯ä»¥è®¾ç½®<code>xhr.responseType</code>,ä¸‹é¢æ˜¯responseTypeæ”¯æŒçš„ç±»å‹</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>å€¼</th>\n<th>xhr.response æ•°æ®ç±»å‹</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>â€œâ€</td>\n<td>String</td>\n<td>é»˜è®¤å€¼(åœ¨ä¸è®¾ç½®responseTypeæ—¶)</td>\n</tr>\n<tr>\n<td>â€œtextâ€</td>\n<td>String</td>\n<td></td>\n</tr>\n<tr>\n<td>â€œdocumentâ€</td>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document\" target=\"_blank\" rel=\"external\">Document</a> å¯¹è±¡</td>\n<td>å¸Œæœ›è¿”å› XML æ ¼å¼æ•°æ®æ—¶ä½¿ç”¨</td>\n</tr>\n<tr>\n<td>â€œjsonâ€</td>\n<td>javascript å¯¹è±¡</td>\n<td>å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼ŒIE10/IE11ä¸æ”¯æŒ</td>\n</tr>\n<tr>\n<td>â€œblobâ€</td>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob\" target=\"_blank\" rel=\"external\">Blob</a>å¯¹è±¡</td>\n<td></td>\n</tr>\n<tr>\n<td>â€œarrayBufferâ€</td>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer\" target=\"_blank\" rel=\"external\">ArrayBuffer</a>å¯¹è±¡</td>\n</tr>\n</tbody>\n</table>\n<p>å®¢æˆ·ç«¯ä»£ç <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</div><div class=\"line\">xhr.open(<span class=\"string\">'GET'</span>, <span class=\"string\">'/json'</span>);</div><div class=\"line\">xhr.responseType = <span class=\"string\">'json'</span>;</div><div class=\"line\">xhr.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.readyState == <span class=\"number\">4</span> &amp;&amp; <span class=\"keyword\">this</span>.status == <span class=\"number\">200</span>) &#123;</div><div class=\"line\">        <span class=\"comment\">//é€šè¿‡xhr.responseå¯ä»¥æ‹¿åˆ°è¿”å›çš„jsonæ•°æ®</span></div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>.response);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\">xhr.send();</div></pre></td></tr></table></figure></p>\n<p>æœåŠ¡ç«¯ä»£ç <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (req.url == <span class=\"string\">'/json'</span>) &#123;</div><div class=\"line\">    res.writeHead(<span class=\"number\">200</span>, &#123; <span class=\"string\">'content-type'</span>: <span class=\"string\">'application/json'</span> &#125;);</div><div class=\"line\">    res.write(<span class=\"string\">'&#123;\"a\": 123, \"b\": \"dcs\"&#125;'</span>);</div><div class=\"line\">    res.end();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<ol>\n<li>é€šè¿‡è°ƒç”¨<code>xhr.overrideMimeType</code>æ–¹æ³•æ¥é‡å†™responseçš„content-type(ä¸è¿‡è¿™ä¸ªæ–¹æ³•æˆ‘è°ƒç”¨ä¹‹åå¹¶æ²¡æœ‰èµ·ä½œç”¨..)</li>\n</ol>\n<h4 id=\"3-3-è®¾ç½®è¯·æ±‚è¶…æ—¶\"><a href=\"#3-3-è®¾ç½®è¯·æ±‚è¶…æ—¶\" class=\"headerlink\" title=\"3.3 è®¾ç½®è¯·æ±‚è¶…æ—¶\"></a>3.3 è®¾ç½®è¯·æ±‚è¶…æ—¶</h4><p>å¯ä»¥è®¾ç½®<code>xhr.timeout</code>,æ¥è®¾ç½®è¶…æ—¶æ—¶é—´(å•ä½æ¯«ç§’),åœ¨xhr.send()æ–¹æ³•è°ƒç”¨åå¼€å§‹è®¡æ—¶</p>\n<h4 id=\"3-4-è®¾ç½®xhrçŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒ\"><a href=\"#3-4-è®¾ç½®xhrçŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒ\" class=\"headerlink\" title=\"3.4 è®¾ç½®xhrçŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒ\"></a>3.4 è®¾ç½®xhrçŠ¶æ€å˜åŒ–æ—¶çš„å›è°ƒ</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">xhr.onreadystatechange = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">switch</span>(xhr.readyState)&#123;</div><div class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">0</span>:<span class=\"comment\">//UNSENT,open()æ–¹æ³•æ²¡æœ‰è°ƒç”¨</span></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">1</span>:<span class=\"comment\">//OPENED,open()æ–¹æ³•å·²è¢«æˆåŠŸè°ƒç”¨,send()æ–¹æ³•è¿˜æœªè¢«è°ƒç”¨ã€‚</span></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">2</span>:<span class=\"comment\">//HEADERS_RECEIVED,send()æ–¹æ³•å·²ç»è¢«è°ƒç”¨, å“åº”å¤´å’Œå“åº”çŠ¶æ€å·²ç»è¿”å›</span></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">3</span>:<span class=\"comment\">//LOADING,å“åº”ä½“ä¸‹è½½ä¸­,responseTextä¸­å·²ç»è·å–äº†éƒ¨åˆ†æ•°æ®.</span></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">4</span>:<span class=\"comment\">//DONE,æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹å·²ç»å®Œæ¯•.</span></div><div class=\"line\">            <span class=\"keyword\">break</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"3-5-xhrçš„äº‹ä»¶\"><a href=\"#3-5-xhrçš„äº‹ä»¶\" class=\"headerlink\" title=\"3.5 xhrçš„äº‹ä»¶\"></a>3.5 xhrçš„äº‹ä»¶</h4><table>\n<thead>\n<tr>\n<th>äº‹ä»¶</th>\n<th>è§¦å‘æ¡ä»¶</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>onreadystatechange</td>\n<td>æ¯å½“xhr.readyStateæ”¹å˜æ—¶è§¦å‘ï¼›ä½†xhr.readyStateç”±é0å€¼å˜ä¸º0æ—¶ä¸è§¦å‘ã€‚</td>\n</tr>\n<tr>\n<td>onloadstart</td>\n<td>è°ƒç”¨xhr.send()æ–¹æ³•åç«‹å³è§¦å‘ï¼Œè‹¥xhr.send()æœªè¢«è°ƒç”¨åˆ™ä¸ä¼šè§¦å‘æ­¤äº‹ä»¶ã€‚</td>\n</tr>\n<tr>\n<td>onprogress</td>\n<td>xhr.upload.onprogressåœ¨ä¸Šä¼ é˜¶æ®µ(å³xhr.send()ä¹‹åï¼Œxhr.readystate=2ä¹‹å‰)è§¦å‘ï¼›xhr.onprogressåœ¨ä¸‹è½½é˜¶æ®µï¼ˆå³xhr.readystate=3æ—¶ï¼‰è§¦å‘</td>\n</tr>\n<tr>\n<td>onload</td>\n<td>å½“è¯·æ±‚æˆåŠŸå®Œæˆæ—¶è§¦å‘ï¼Œæ­¤æ—¶xhr.readystate=4</td>\n</tr>\n<tr>\n<td>onloadend</td>\n<td>å½“è¯·æ±‚ç»“æŸï¼ˆåŒ…æ‹¬è¯·æ±‚æˆåŠŸå’Œè¯·æ±‚å¤±è´¥ï¼‰æ—¶è§¦å‘</td>\n</tr>\n<tr>\n<td>onabort</td>\n<td>å½“è°ƒç”¨xhr.abort()åè§¦å‘</td>\n</tr>\n<tr>\n<td>ontimeout</td>\n<td>xhr.timeoutä¸ç­‰äº0ï¼Œç”±è¯·æ±‚å¼€å§‹å³onloadstartå¼€å§‹ç®—èµ·ï¼Œå½“åˆ°è¾¾xhr.timeoutæ‰€è®¾ç½®æ—¶é—´è¯·æ±‚è¿˜æœªç»“æŸå³onloadendï¼Œåˆ™è§¦å‘æ­¤äº‹ä»¶ã€‚</td>\n</tr>\n<tr>\n<td>onerror</td>\n<td>åœ¨è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œè‹¥å‘ç”ŸNetwork erroråˆ™ä¼šè§¦å‘æ­¤äº‹ä»¶ï¼ˆè‹¥å‘ç”ŸNetwork erroræ—¶ï¼Œä¸Šä¼ è¿˜æ²¡æœ‰ç»“æŸï¼Œåˆ™ä¼šå…ˆè§¦å‘xhr.upload.onerrorï¼Œå†è§¦å‘xhr.onerrorï¼›è‹¥å‘ç”ŸNetwork erroræ—¶ï¼Œä¸Šä¼ å·²ç»ç»“æŸï¼Œåˆ™åªä¼šè§¦å‘xhr.onerrorï¼‰ã€‚<strong>æ³¨æ„</strong>ï¼Œåªæœ‰å‘ç”Ÿäº†ç½‘ç»œå±‚çº§åˆ«çš„å¼‚å¸¸æ‰ä¼šè§¦å‘æ­¤äº‹ä»¶ï¼Œå¯¹äºåº”ç”¨å±‚çº§åˆ«çš„å¼‚å¸¸ï¼Œå¦‚å“åº”è¿”å›çš„xhr.statusCodeæ˜¯4xxæ—¶ï¼Œå¹¶ä¸å±äºNetwork errorï¼Œæ‰€ä»¥ä¸ä¼šè§¦å‘onerroräº‹ä»¶ï¼Œè€Œæ˜¯ä¼šè§¦å‘onloadäº‹ä»¶ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"4-å‘é€æ•°æ®\"><a href=\"#4-å‘é€æ•°æ®\" class=\"headerlink\" title=\"4.å‘é€æ•°æ®\"></a>4.å‘é€æ•°æ®</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">xhr.send(data);</div></pre></td></tr></table></figure>\n<ul>\n<li>å¯¹äºGET/HEADè¯·æ±‚<code>send</code>æ–¹æ³•é€šå¸¸ä¸ä¼ å‚æ•°</li>\n<li>å¯¹äºPOST/DELETE/PUTè¯·æ±‚,<code>xhr.send(data)</code>çš„å‚æ•°dataå¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š<ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer\" target=\"_blank\" rel=\"external\">ArrayBuffer</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob\" target=\"_blank\" rel=\"external\">Blob</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document\" target=\"_blank\" rel=\"external\">Document</a></li>\n<li>DOMString</li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FormData\" target=\"_blank\" rel=\"external\">FormData</a></li>\n</ul>\n</li>\n</ul>\n<p>æ¥ä¸€ä¸ªğŸŒ°</p>\n<p>å®¢æˆ·ç«¯ä»£ç <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> fileInputElement = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'file'</span>)</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> oMyForm = <span class=\"keyword\">new</span> FormData();</div><div class=\"line\"></div><div class=\"line\">oMyForm.append(<span class=\"string\">\"username\"</span>, <span class=\"string\">\"dcs\"</span>);</div><div class=\"line\">oMyForm.append(<span class=\"string\">\"num\"</span>, <span class=\"number\">123456</span>); <span class=\"comment\">// æ•°å­—123456è¢«ç«‹å³è½¬æ¢æˆå­—ç¬¦ä¸²\"123456\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// fileInputElementä¸­å·²ç»åŒ…å«äº†ç”¨æˆ·æ‰€é€‰æ‹©çš„æ–‡ä»¶</span></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; fileInputElement.files.length; i++) &#123;</div><div class=\"line\">    oMyForm.append(<span class=\"string\">\"file\"</span>, fileInputElement.files[i]);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> oFileBody = <span class=\"string\">'&lt;a id=\"a\"&gt;&lt;b id=\"b\"&gt;hey!&lt;/b&gt;&lt;/a&gt;'</span>; <span class=\"comment\">// Blobå¯¹è±¡åŒ…å«çš„æ–‡ä»¶å†…å®¹</span></div><div class=\"line\"><span class=\"keyword\">var</span> oBlob = <span class=\"keyword\">new</span> Blob([oFileBody], &#123;</div><div class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">\"text/xml\"</span></div><div class=\"line\">&#125;);</div><div class=\"line\">oMyForm.append(<span class=\"string\">\"blob\"</span>, oBlob);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</div><div class=\"line\">xhr.upload.onprogress = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (event.lengthComputable) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> completedPercent = event.loaded / event.total;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(completedPercent);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">xhr.open(<span class=\"string\">\"POST\"</span>, <span class=\"string\">\"/upload\"</span>);</div><div class=\"line\">xhr.send(oMyForm);</div></pre></td></tr></table></figure></p>\n<p>æœåŠ¡ç«¯ä»£ç <br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (req.url == <span class=\"string\">'/upload'</span> &amp;&amp; req.method.toLowerCase() == <span class=\"string\">'post'</span>) &#123;</div><div class=\"line\">    req.on(<span class=\"string\">'data'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">buffer</span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//ä¼šä¸æ—¶çš„è§¦å‘dataäº‹ä»¶æ¥æ¥å—å®¢æˆ·ç«¯ä¼ é€’çš„æ•°æ®</span></div><div class=\"line\">    &#125;)</div><div class=\"line\">    .on(<span class=\"string\">'end'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//æ•°æ®ä¼ é€’å®Œæ¯•</span></div><div class=\"line\">    &#125;);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><strong>æ³¨æ„</strong>: å®¢æˆ·ç«¯çš„<code>xhr.upload.onprogress</code>è¡¨ç¤ºçš„æ˜¯ä¸Šä¼ è¿›åº¦è§¦å‘çš„å›è°ƒ(è¿›åº¦å–å†³äºå®¢æˆ·ç«¯çš„ç½‘ç»œçŠ¶å†µ),å‚æ•°<code>event.total</code>é’ˆå¯¹çš„æ˜¯æ‰€æœ‰fileçš„æ€»å¤§å°, è€ŒæœåŠ¡ç«¯çš„<code>req.on(&#39;data&#39;, function(){})</code>åªæ˜¯è¿™æ¬¡è¯·æ±‚çš„æ•°æ®æµæ¥å—ä¸€å®šé‡çš„æ•°æ®åè§¦å‘çš„å›è°ƒ,ä¸¤è€…ä¹‹é—´æ²¡æœ‰ç›´æ¥å…³ç³»</p>\n<h2 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h2><ul>\n<li><a href=\"https://segmentfault.com/a/1190000004322487\" target=\"_blank\" rel=\"external\">ä½ çœŸçš„ä¼šä½¿ç”¨XMLHttpRequestå—ï¼Ÿ</a></li>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest\" target=\"_blank\" rel=\"external\">MDN XMLHttpRequest</a></li>\n<li><a href=\"https://www.html5rocks.com/zh/tutorials/file/xhr2/\" target=\"_blank\" rel=\"external\">XMLHttpRequest2 æ–°æŠ€å·§</a></li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cj2evu1b90001yptxejlt38sf","tag_id":"cj2evu1bc0002yptx5t2bw2vb","_id":"cj2evu1bf0003yptxb8m4xtx4"}],"Tag":[{"name":"javascript","_id":"cj2evu1bc0002yptx5t2bw2vb"}]}}